<fnx-app>

    <screen-login *ngIf="ctx.loggedUser == null"></screen-login>

    <template [ngIf]="ctx.logged">
        <div class="fit flex-column">
            <header class="padding-small theme">
                <nav class="item-row">
                    <!--<button class="hide-on-l btn icon" (click)="layout.toggle()">menu</button>-->
                    <h1>fnx.io <span class="hide-on-s">backend admin</span>
                        <span *ngIf="isTesting()">TESTING</span>
                    </h1>
                    <span class="spacer"></span>
                    <fnx-dropdown-menu *ngIf="ctx.logged" label="{{ ctx.loggedUser['firstName'] }} {{ ctx.loggedUser['lastName'] }}">
                        <ul class="item-column body no-margin">
                            <li><a (click)="logout()">logout</a></li>
                        </ul>
                    </fnx-dropdown-menu>
                </nav>
            </header>
            <main class="spacer flex-row">
                <aside sidebar class="flex-column" style="width: 15em">
                    <nav class="item-column spacer scroll active-children"> <!--(click)="layout.toggle()"-->
                        <a data-prefix="view_compact" [routerLink]="routing.dashboard.toUrl()" routerLinkActive="selected">Dashboard</a>
                        <a data-prefix="group" [routerLink]="routing.usersList.toUrl()" routerLinkActive="selected">Users</a>
                        <a data-prefix="library_books" [routerLink]="routing.cmsList.toUrl(parameters: cmsRouteParams['news'])" routerLinkActive="selected">News</a>
                        <a data-prefix="event_note" [routerLink]="routing.cmsList.toUrl(parameters: cmsRouteParams['events'])" routerLinkActive="selected">Events</a>
                    </nav>
                    <p class="text-center bg-theme no-margin padding">
                        Created by <a target="_blank" href="https://fnx.io/">fnx.io</a>
                    </p>
                </aside>
                <main class="border-left spacer relative">
                    <router-outlet [routes]="routing.routes"></router-outlet>
                </main>
            </main>
        </div>
    </template>

    <!--<main class="relative app__content" *ngIf="refreshing == 0">
        <router-outlet [routes]="routing.routes"></router-outlet>
    </main>-->

</fnx-app>
<!--<fnx-modal (close)="closeError()" [hidden]="errorHeadline == null && errorMessage == null">
    <h3 header>{{errorHeadline}}</h3>
    <p main>{{errorMessage}}</p>
    <ul main *ngIf="errorList.isNotEmpty">
        <li *ngFor="let e of errorList">{{e["path"]}} {{e["message"]}}</li>
    </ul>
    <p footer class="buttonbar">
        <button class="btn" attr.href="mailto:support@fnx.io?subject=Complete Doddle {{errorHeadline}}">support</button>
        <span class="spacer"></span>
        <button class="btn bg-important" (click)="closeError()">ok</button>
    </p>
</fnx-modal>-->
